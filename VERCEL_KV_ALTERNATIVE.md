# Vercel KVが見つからない場合の代替案

## 現在の動作

現在のコードは、Vercel KVが設定されていない場合、自動的にメモリ内に保存します。
ただし、Vercelのサーバーレス環境では、リクエスト間でデータは保持されません。

## 代替案

### 1. メモリ内保存（現在の実装）
- **メリット**: 設定不要、すぐに動作
- **デメリット**: サーバーレス環境では永続化されない（リクエスト間でデータが消える）

### 2. Vercel KVを使用（推奨）
Vercel KVが見つからない場合：

1. **Vercelダッシュボードで確認**
   - プロジェクトを選択
   - 左側のメニューから「Storage」を探す
   - または「Settings」→「Storage」を確認

2. **Storageタブが見つからない場合**
   - Vercelのアカウント設定を確認
   - 無料プラン（Hobby）でも利用可能なはずです
   - ブラウザをリフレッシュしてみる

3. **別の方法でKVデータベースを作成**
   - Vercel CLIを使用：
     ```bash
     vercel kv create vmeda-kv
     ```

### 3. 外部の無料データベースサービスを使用

Vercel KVが利用できない場合、以下の無料サービスを使用できます：

#### MongoDB Atlas（推奨）
- **無料枠**: 512MB、無制限のコレクション
- **セットアップ**:
  1. [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)にアカウント作成
  2. 無料クラスターを作成
  3. 接続文字列を取得
  4. 環境変数 `MONGODB_URI` を設定

#### Supabase（PostgreSQL）
- **無料枠**: 500MB、無制限のAPIリクエスト
- **セットアップ**:
  1. [Supabase](https://supabase.com)にアカウント作成
  2. プロジェクトを作成
  3. 接続文字列を取得
  4. 環境変数を設定

#### PlanetScale（MySQL）
- **無料枠**: 5GB、無制限のブランチ
- **セットアップ**:
  1. [PlanetScale](https://planetscale.com)にアカウント作成
  2. データベースを作成
  3. 接続文字列を取得
  4. 環境変数を設定

## 推奨される対応

1. **まずVercel KVを探す**
   - Vercelダッシュボードで「Storage」タブを確認
   - 見つからない場合は、Vercel CLIで作成を試す

2. **Vercel KVが見つからない場合**
   - メモリ内保存で動作するが、永続化されない
   - 永続化が必要な場合は、MongoDB Atlasなどの外部サービスを使用

3. **現在の実装**
   - Vercel KVが設定されていない場合、自動的にメモリ内に保存
   - 少なくとも動作はします（ただし、永続化されない）

## 注意事項

- Vercelのサーバーレス環境では、ファイルシステムへの書き込みは一時的なものなので、永続化されません
- メモリ内のデータは、リクエスト間で保持されません
- 永続化が必要な場合は、Vercel KVまたは外部データベースサービスが必要です

